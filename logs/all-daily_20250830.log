2025-08-30 18:09:15.264 +07:00 [DBG] Registered model binder providers, in the following order: ["Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BinderTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ServicesModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.BodyModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.HeaderModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FloatingPointTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.EnumTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DateTimeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.SimpleTypeModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.TryParseModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CancellationTokenModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ByteArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormFileModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.FormCollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.KeyValuePairModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.DictionaryModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ArrayModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.CollectionModelBinderProvider","Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexObjectModelBinderProvider"]
2025-08-30 18:09:15.340 +07:00 [DBG] Hosting starting
2025-08-30 18:09:15.371 +07:00 [INF] Now listening on: http://localhost:5245
2025-08-30 18:09:15.372 +07:00 [DBG] Loaded hosting startup assembly base-dotnet
2025-08-30 18:09:15.372 +07:00 [DBG] Loaded hosting startup assembly Microsoft.AspNetCore.Watch.BrowserRefresh
2025-08-30 18:09:15.373 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-30 18:09:15.373 +07:00 [INF] Hosting environment: Development
2025-08-30 18:09:15.373 +07:00 [INF] Content root path: /Users/reihanrenaldi/Documents/ReihanSigma/projects/dotnet/base-dotnet
2025-08-30 18:09:15.373 +07:00 [DBG] Hosting started
2025-08-30 18:09:15.606 +07:00 [DBG] Connection id "0HNF7MMK5KG3H" accepted.
2025-08-30 18:09:15.607 +07:00 [DBG] Connection id "0HNF7MMK5KG3H" started.
2025-08-30 18:09:15.607 +07:00 [DBG] Connection id "0HNF7MMK5KG3I" accepted.
2025-08-30 18:09:15.607 +07:00 [DBG] Connection id "0HNF7MMK5KG3I" started.
2025-08-30 18:09:15.624 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5245/swagger/index.html - null null
2025-08-30 18:09:15.634 +07:00 [DBG] Wildcard detected, all requests with hosts will be allowed.
2025-08-30 18:09:15.650 +07:00 [DBG] No candidates found for the request path '/swagger/index.html'
2025-08-30 18:09:15.652 +07:00 [DBG] Request did not match any endpoints
2025-08-30 18:09:15.696 +07:00 [DBG] Response markup is scheduled to include browser refresh script injection.
2025-08-30 18:09:15.705 +07:00 [DBG] Response markup was updated to include browser refresh script injection.
2025-08-30 18:09:15.706 +07:00 [DBG] Connection id "0HNF7MMK5KG3H" completed keep alive response.
2025-08-30 18:09:15.709 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5245/swagger/index.html - 200 null text/html;charset=utf-8 85.3746ms
2025-08-30 18:09:15.724 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5245/swagger/swagger-ui-bundle.js - null null
2025-08-30 18:09:15.724 +07:00 [DBG] No candidates found for the request path '/swagger/swagger-ui-bundle.js'
2025-08-30 18:09:15.725 +07:00 [DBG] Request did not match any endpoints
2025-08-30 18:09:15.729 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5245/_framework/aspnetcore-browser-refresh.js - null null
2025-08-30 18:09:15.732 +07:00 [DBG] Connection id "0HNF7MMK5KG3I" completed keep alive response.
2025-08-30 18:09:15.732 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5245/_framework/aspnetcore-browser-refresh.js - 200 13710 application/javascript; charset=utf-8 2.4604ms
2025-08-30 18:09:15.743 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-08-30 18:09:15.744 +07:00 [DBG] Connection id "0HNF7MMK5KG3H" completed keep alive response.
2025-08-30 18:09:15.745 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5245/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 21.1587ms
2025-08-30 18:09:15.827 +07:00 [INF] Request starting HTTP/1.1 GET http://localhost:5245/swagger/v1/swagger.json - null null
2025-08-30 18:09:15.827 +07:00 [DBG] No candidates found for the request path '/swagger/v1/swagger.json'
2025-08-30 18:09:15.827 +07:00 [DBG] Request did not match any endpoints
2025-08-30 18:09:16.019 +07:00 [DBG] Connection id "0HNF7MMK5KG3H" completed keep alive response.
2025-08-30 18:09:16.019 +07:00 [INF] Request finished HTTP/1.1 GET http://localhost:5245/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 192.2966ms
2025-08-30 18:09:21.429 +07:00 [DBG] Connection id "0HNF7MMK5KG3I" received FIN.
2025-08-30 18:09:21.429 +07:00 [DBG] Connection id "0HNF7MMK5KG3H" received FIN.
2025-08-30 18:09:21.430 +07:00 [DBG] Connection id "0HNF7MMK5KG3I" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-08-30 18:09:21.430 +07:00 [DBG] Connection id "0HNF7MMK5KG3H" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-08-30 18:09:21.436 +07:00 [DBG] Connection id "0HNF7MMK5KG3H" disconnecting.
2025-08-30 18:09:21.436 +07:00 [DBG] Connection id "0HNF7MMK5KG3I" disconnecting.
2025-08-30 18:09:21.438 +07:00 [DBG] Connection id "0HNF7MMK5KG3H" stopped.
2025-08-30 18:09:21.438 +07:00 [DBG] Connection id "0HNF7MMK5KG3I" stopped.
2025-08-30 18:10:51.368 +07:00 [DBG] Connection id "0HNF7MMK5KG3J" accepted.
2025-08-30 18:10:51.374 +07:00 [DBG] Connection id "0HNF7MMK5KG3J" started.
2025-08-30 18:10:51.378 +07:00 [INF] Request starting HTTP/1.1 POST http://localhost:5245/User - application/json 143
2025-08-30 18:10:51.381 +07:00 [DBG] 1 candidate(s) found for the request path '/User'
2025-08-30 18:10:51.382 +07:00 [DBG] Endpoint 'BaseDotnet.Modules.Users.Controllers.UserController.Create (base-dotnet)' with route pattern 'User' is valid for the request path '/User'
2025-08-30 18:10:51.383 +07:00 [DBG] Request matched endpoint 'BaseDotnet.Modules.Users.Controllers.UserController.Create (base-dotnet)'
2025-08-30 18:10:51.383 +07:00 [DBG] Static files was skipped as the request already matched an endpoint.
2025-08-30 18:10:51.383 +07:00 [WRN] Failed to determine the https port for redirect.
2025-08-30 18:10:51.385 +07:00 [DBG] The request has an origin header: 'http://localhost:5245'.
2025-08-30 18:10:51.385 +07:00 [INF] CORS policy execution successful.
2025-08-30 18:10:51.458 +07:00 [DBG] An 'IServiceProvider' was created for internal use by Entity Framework.
2025-08-30 18:10:51.467 +07:00 [INF] [null]
2025-08-30 18:10:51.467 +07:00 [INF] Executing endpoint 'BaseDotnet.Modules.Users.Controllers.UserController.Create (base-dotnet)'
2025-08-30 18:10:51.475 +07:00 [INF] Route matched with {action = "Create", controller = "User"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Create(BaseDotnet.Modules.Users.Models.CreateUserRequest) on controller BaseDotnet.Modules.Users.Controllers.UserController (base-dotnet).
2025-08-30 18:10:51.476 +07:00 [DBG] Execution plan of authorization filters (in the following order): ["None"]
2025-08-30 18:10:51.476 +07:00 [DBG] Execution plan of resource filters (in the following order): ["None"]
2025-08-30 18:10:51.476 +07:00 [DBG] Execution plan of action filters (in the following order): ["Microsoft.AspNetCore.Mvc.ModelBinding.UnsupportedContentTypeFilter (Order: -3000)","Microsoft.AspNetCore.Mvc.Infrastructure.ModelStateInvalidFilter (Order: -2000)"]
2025-08-30 18:10:51.476 +07:00 [DBG] Execution plan of exception filters (in the following order): ["None"]
2025-08-30 18:10:51.476 +07:00 [DBG] Execution plan of result filters (in the following order): ["Microsoft.AspNetCore.Mvc.Infrastructure.ClientErrorResultFilter (Order: -2000)"]
2025-08-30 18:10:51.476 +07:00 [DBG] Executing controller factory for controller BaseDotnet.Modules.Users.Controllers.UserController (base-dotnet)
2025-08-30 18:10:51.477 +07:00 [DBG] Executed controller factory for controller BaseDotnet.Modules.Users.Controllers.UserController (base-dotnet)
2025-08-30 18:10:51.478 +07:00 [DBG] Attempting to bind parameter 'item' of type 'BaseDotnet.Modules.Users.Models.CreateUserRequest' ...
2025-08-30 18:10:51.479 +07:00 [DBG] Attempting to bind parameter 'item' of type 'BaseDotnet.Modules.Users.Models.CreateUserRequest' using the name '' in request data ...
2025-08-30 18:10:51.479 +07:00 [DBG] Selected input formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonInputFormatter' for content type 'application/json'.
2025-08-30 18:10:51.482 +07:00 [DBG] Connection id "0HNF7MMK5KG3J", Request id "0HNF7MMK5KG3J:00000001": started reading request body.
2025-08-30 18:10:51.482 +07:00 [DBG] Connection id "0HNF7MMK5KG3J", Request id "0HNF7MMK5KG3J:00000001": done reading request body.
2025-08-30 18:10:51.484 +07:00 [DBG] JSON input formatter succeeded, deserializing to type 'BaseDotnet.Modules.Users.Models.CreateUserRequest'
2025-08-30 18:10:51.484 +07:00 [DBG] Done attempting to bind parameter 'item' of type 'BaseDotnet.Modules.Users.Models.CreateUserRequest'.
2025-08-30 18:10:51.484 +07:00 [DBG] Done attempting to bind parameter 'item' of type 'BaseDotnet.Modules.Users.Models.CreateUserRequest'.
2025-08-30 18:10:51.484 +07:00 [DBG] Attempting to validate the bound parameter 'item' of type 'BaseDotnet.Modules.Users.Models.CreateUserRequest' ...
2025-08-30 18:10:51.487 +07:00 [DBG] Done attempting to validate the bound parameter 'item' of type 'BaseDotnet.Modules.Users.Models.CreateUserRequest'.
2025-08-30 18:10:51.738 +07:00 [DBG] Entity Framework Core 8.0.1 initialized 'BaseDotnetDbContext' using provider 'Npgsql.EntityFrameworkCore.PostgreSQL:8.0.0+2539d1f4bd0d429cbae20336d531d14938a54297' with options: None
2025-08-30 18:10:51.749 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => u.Email == __request_Email_0)'
2025-08-30 18:10:51.833 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM master.mst_users AS m
            WHERE m.email == @__request_Email_0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    BaseDotnet.Core.DbContext.BaseDotnetDbContext, 
    False, 
    False, 
    True
)
    .Single()'
2025-08-30 18:10:51.846 +07:00 [DBG] Creating DbConnection.
2025-08-30 18:10:51.859 +07:00 [DBG] Created DbConnection. (11ms).
2025-08-30 18:10:51.860 +07:00 [DBG] Opening connection to database 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:51.906 +07:00 [DBG] Opened connection to database 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:51.907 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-08-30 18:10:51.910 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (1ms).
2025-08-30 18:10:51.911 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (4ms).
2025-08-30 18:10:51.914 +07:00 [DBG] Executing DbCommand [Parameters=[@__request_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM master.mst_users AS m
    WHERE m.email = @__request_Email_0)
2025-08-30 18:10:51.942 +07:00 [INF] Executed DbCommand (28ms) [Parameters=[@__request_Email_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM master.mst_users AS m
    WHERE m.email = @__request_Email_0)
2025-08-30 18:10:51.947 +07:00 [DBG] Closing data reader to 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:51.950 +07:00 [DBG] A data reader for 'my_app' on server 'tcp://localhost:5432' is being disposed after spending 6ms reading results.
2025-08-30 18:10:51.951 +07:00 [DBG] Closing connection to database 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:51.953 +07:00 [DBG] Closed connection to database 'my_app' on server 'tcp://localhost:5432' (1ms).
2025-08-30 18:10:51.954 +07:00 [DBG] Compiling query expression: 
'DbSet<User>()
    .Any(u => u.UserName == __request_UserName_0)'
2025-08-30 18:10:51.956 +07:00 [DBG] Generated query execution expression: 
'queryContext => new SingleQueryingEnumerable<bool>(
    (RelationalQueryContext)queryContext, 
    RelationalCommandCache.QueryExpression(
        Projection Mapping:
            EmptyProjectionMember -> 0
        SELECT EXISTS (
            SELECT 1
            FROM master.mst_users AS m
            WHERE m.username == @__request_UserName_0)), 
    null, 
    Func<QueryContext, DbDataReader, ResultContext, SingleQueryResultCoordinator, bool>, 
    BaseDotnet.Core.DbContext.BaseDotnetDbContext, 
    False, 
    False, 
    True
)
    .Single()'
2025-08-30 18:10:51.956 +07:00 [DBG] Opening connection to database 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:51.956 +07:00 [DBG] Opened connection to database 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:51.956 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-08-30 18:10:51.956 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-08-30 18:10:51.956 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-08-30 18:10:51.956 +07:00 [DBG] Executing DbCommand [Parameters=[@__request_UserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM master.mst_users AS m
    WHERE m.username = @__request_UserName_0)
2025-08-30 18:10:51.959 +07:00 [INF] Executed DbCommand (2ms) [Parameters=[@__request_UserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM master.mst_users AS m
    WHERE m.username = @__request_UserName_0)
2025-08-30 18:10:51.959 +07:00 [DBG] Closing data reader to 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:51.959 +07:00 [DBG] A data reader for 'my_app' on server 'tcp://localhost:5432' is being disposed after spending 0ms reading results.
2025-08-30 18:10:51.959 +07:00 [DBG] Closing connection to database 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:51.959 +07:00 [DBG] Closed connection to database 'my_app' on server 'tcp://localhost:5432' (0ms).
2025-08-30 18:10:51.971 +07:00 [DBG] 'BaseDotnetDbContext' generated a temporary value for the property 'User.UserID'. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-08-30 18:10:51.990 +07:00 [DBG] Context 'BaseDotnetDbContext' started tracking 'User' entity. Consider using 'DbContextOptionsBuilder.EnableSensitiveDataLogging' to see key values.
2025-08-30 18:10:51.993 +07:00 [DBG] SaveChanges starting for 'BaseDotnetDbContext'.
2025-08-30 18:10:51.994 +07:00 [DBG] DetectChanges starting for 'BaseDotnetDbContext'.
2025-08-30 18:10:52.000 +07:00 [DBG] DetectChanges completed for 'BaseDotnetDbContext'.
2025-08-30 18:10:52.022 +07:00 [DBG] Opening connection to database 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:52.023 +07:00 [DBG] Opened connection to database 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:52.025 +07:00 [DBG] Creating DbCommand for 'ExecuteReader'.
2025-08-30 18:10:52.025 +07:00 [DBG] Created DbCommand for 'ExecuteReader' (0ms).
2025-08-30 18:10:52.025 +07:00 [DBG] Initialized DbCommand for 'ExecuteReader' (0ms).
2025-08-30 18:10:52.025 +07:00 [DBG] Executing DbCommand [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO master.mst_users (created_date, display_name, email, last_login, password, role_id, salt, status, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING user_id;
2025-08-30 18:10:52.037 +07:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = DateTime), @p1='?', @p2='?', @p3='?' (DbType = DateTime), @p4='?', @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?'], CommandType='"Text"', CommandTimeout='30']
INSERT INTO master.mst_users (created_date, display_name, email, last_login, password, role_id, salt, status, username)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8)
RETURNING user_id;
2025-08-30 18:10:52.039 +07:00 [DBG] Closing connection to database 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:52.039 +07:00 [DBG] Closed connection to database 'my_app' on server 'tcp://localhost:5432' (0ms).
2025-08-30 18:10:52.048 +07:00 [ERR] An exception occurred in the database while saving changes for context type 'BaseDotnet.Core.DbContext.BaseDotnetDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "mst_users" violates foreign key constraint "fk_user_role"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "mst_users" violates foreign key constraint "fk_user_role"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: master
    TableName: mst_users
    ConstraintName: fk_user_role
    File: ri_triggers.c
    Line: 2539
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "mst_users" violates foreign key constraint "fk_user_role"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "mst_users" violates foreign key constraint "fk_user_role"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: master
    TableName: mst_users
    ConstraintName: fk_user_role
    File: ri_triggers.c
    Line: 2539
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-30 18:10:52.056 +07:00 [ERR] User Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23503: insert or update on table "mst_users" violates foreign key constraint "fk_user_role"

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23503
    MessageText: insert or update on table "mst_users" violates foreign key constraint "fk_user_role"
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: master
    TableName: mst_users
    ConstraintName: fk_user_role
    File: ri_triggers.c
    Line: 2539
    Routine: ri_ReportViolation
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BaseDotnet.Modules.Users.Services.UserService.Add(CreateUserRequest request) in /Users/reihanrenaldi/Documents/ReihanSigma/projects/dotnet/base-dotnet/Modules/Users/Services/UserService.cs:line 143
   at BaseDotnet.Modules.Users.Controllers.UserController.Create(CreateUserRequest item) in /Users/reihanrenaldi/Documents/ReihanSigma/projects/dotnet/base-dotnet/Modules/Users/Controllers/UserController.cs:line 66
2025-08-30 18:10:52.058 +07:00 [DBG] List of registered output formatters, in the following order: ["Microsoft.AspNetCore.Mvc.Formatters.HttpNoContentOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StringOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.StreamOutputFormatter","Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter"]
2025-08-30 18:10:52.058 +07:00 [DBG] No information found on request to perform content negotiation.
2025-08-30 18:10:52.058 +07:00 [DBG] Attempting to select an output formatter without using a content type as no explicit content types were specified for the response.
2025-08-30 18:10:52.058 +07:00 [DBG] Attempting to select the first formatter in the output formatters list which can write the result.
2025-08-30 18:10:52.059 +07:00 [DBG] Selected output formatter 'Microsoft.AspNetCore.Mvc.Formatters.SystemTextJsonOutputFormatter' and content type 'application/json' to write the response.
2025-08-30 18:10:52.059 +07:00 [INF] Executing BadRequestObjectResult, writing value of type '<>f__AnonymousType2`1[[System.Object, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-30 18:10:52.063 +07:00 [INF] Executed action BaseDotnet.Modules.Users.Controllers.UserController.Create (base-dotnet) in 585.5692ms
2025-08-30 18:10:52.063 +07:00 [INF] Executed endpoint 'BaseDotnet.Modules.Users.Controllers.UserController.Create (base-dotnet)'
2025-08-30 18:10:52.064 +07:00 [DBG] Connection id "0HNF7MMK5KG3J" completed keep alive response.
2025-08-30 18:10:52.064 +07:00 [DBG] 'BaseDotnetDbContext' disposed.
2025-08-30 18:10:52.066 +07:00 [DBG] Disposing connection to database 'my_app' on server 'tcp://localhost:5432'.
2025-08-30 18:10:52.066 +07:00 [DBG] Disposed connection to database 'my_app' on server 'tcp://localhost:5432' (0ms).
2025-08-30 18:10:52.066 +07:00 [INF] Request finished HTTP/1.1 POST http://localhost:5245/User - 400 null application/json; charset=utf-8 688.7643ms
2025-08-30 18:10:59.651 +07:00 [INF] Application is shutting down...
2025-08-30 18:10:59.652 +07:00 [DBG] Hosting stopping
2025-08-30 18:10:59.657 +07:00 [DBG] Connection id "0HNF7MMK5KG3J" disconnecting.
2025-08-30 18:10:59.658 +07:00 [DBG] Connection id "0HNF7MMK5KG3J" stopped.
2025-08-30 18:10:59.658 +07:00 [DBG] Connection id "0HNF7MMK5KG3J" sending FIN because: "The Socket transport's send loop completed gracefully."
2025-08-30 18:10:59.662 +07:00 [DBG] Hosting stopped
